# $\textbf{1. ColXTR}$åŸç†

> ## $\textbf{1.1. ColBERTv2}$æ¦‚è¿°
>
> > ### $\textbf{1.1.1. }$è®­ç»ƒä¼˜åŒ–
> >
> > > :one:éš¾è´Ÿæ ·æœ¬ç”Ÿæˆ
> > >
> > > 1. åˆç­›ï¼šåŸºäº$\text{BM-25}$æ‰¾åˆ°å¯èƒ½çš„è´Ÿæ ·æœ¬
> > > 2. é‡æ’ï¼šä½¿ç”¨$\text{KL}$æ•£åº¦å°†å¤§å‹äº¤å‰ç¼–ç å™¨è’¸é¦è¿›$\text{MiniLM}$ï¼Œå†ç”¨$\text{MiniLM}$ä¿ç•™è´Ÿæ ·æœ¬ä¸­çš„éš¾è´Ÿæ ·æœ¬
> > >
> > > :two:é«˜æ•ˆè®­ç»ƒç»“æ„
> > >
> > > 1. å¤šå…ƒç»„ç»“æ„ï¼šä»åŸæ¥çš„ç»“æ„$\langle q, {d}^+,{d}^\text{â€“}\rangle$ï¼Œå˜æˆ$\langle q, \textbf{d}_{w}\rangle\text{=}\langle q, {d}^+_{1},{d}^\text{â€“}_{2},...,{d}^\text{â€“}_{w}\rangle$ç»“æ„
> > > 2. æ‰¹å†…è´Ÿæ ·æœ¬ï¼šé™¤è‡ªèº«è´Ÿæ ·æœ¬å¤–ï¼Œè¿˜å°†æ‰¹å†…å…¶ä»–æŸ¥è¯¢çš„æ‰€æœ‰æ®µè½è§†ä¸ºè´Ÿæ ·æœ¬ï¼Œç”¨æ¥ç»Ÿä¸€ä¼˜åŒ–è®­ç»ƒå‡½æ•°
> > >
> > > :three:é™å™ªè®­ç»ƒä¼˜åŒ–ï¼š
> > >
> > > 1. æ ·æœ¬åˆ·æ–°ï¼šå®šæœŸç”¨è®­ç»ƒåˆ°ä¸€åŠçš„æ¨¡å‹ï¼Œé‡æ–°ç”Ÿæˆè®­ç»ƒæ ·æœ¬
> > > 2. é˜²è¿‡æ‹Ÿåˆï¼šå®šæœŸåˆ·æ–°è®­ç»ƒæ ·æœ¬ï¼Œä»¥é˜²æ­¢é™·å…¥å±€éƒ¨æœ€ä¼˜
> >
> > ### $\textbf{1.1.2. }$æ•´ä½“æµç¨‹
> >
> > > :one:æ®‹å·®å‹ç¼©çš„åŸç†
> > >
> > > 1. èšç±»ï¼šå¯¹å…¨éƒ¨æ®µè½å…¨éƒ¨å‘é‡çš„é›†åˆ$\{p_j\}$è¿›è¡Œèšç±»ï¼Œä¸ºæ¯ä¸ªå‘é‡$p_j$åˆ†é…äº†ä¸€ä¸ªè´¨å¿ƒ$C_{p_j}$ 
> > > 2. æ®‹å·®ï¼šå°±æ˜¯$p_j$ä¸å…¶è´¨å¿ƒ$C_{p_j}$çš„è·ç¦»$r\text{=}p_j\text{â€“}C_{p_j}$ 
> > > 3. å‹ç¼©ï¼šå°†æµ®ç‚¹æ•°å‹ç¼©ä¸ºäºŒè¿›åˆ¶è¡¨ç¤ºï¼Œå¦‚[$r$æ¯ä¸ªç»´åº¦çš„è¿ç»­åˆ†å¸ƒ$\xrightarrow{åˆ†å‰²ä¸º}4$ä¸ªç¦»æ•£çŠ¶æ€]$\xLeftrightarrow{å¯¹åº”}2$ä¸ª$\text{bit}$æ‰€è¡¨ç¤ºçš„å››ç§çŠ¶æ€
> > > 4. ç¼–ç ï¼šå°†æ¯ä¸ª$p_j$è¡¨ç¤ºä¸ºè´¨å¿ƒ$C_{p_j}\text{+}$å‹ç¼©çš„æ®‹å·®ï¼Œé€šè¿‡åå‘è§£å‹ç¼©æ®‹å·®å³å¯å¾—åˆ°è¿‘ä¼¼çš„$p_j$ 
> > >
> > > :two:ç¦»çº¿ç´¢å¼•æµç¨‹
> > >
> > > 1. è¿‘ä¼¼è´¨å¿ƒï¼šæŠ½å–ä¸€éƒ¨åˆ†æ®µè½$\text{Token}$æ‰§è¡ŒåµŒå…¥ï¼Œå†å¯¹éƒ¨åˆ†çš„åµŒå…¥å‘é‡æ‰§è¡Œ$\sqrt{n_{\text{embeddings}}}\text{-Means}$èšç±»ï¼Œå¾—åˆ°$\sqrt{n_{\text{embeddings}}}$ä¸ªè´¨å¿ƒ
> > > 2. å‹ç¼©ç¼–ç ï¼šå¯¹æ‰€æœ‰çš„æ®µè½è¿›è¡Œå…¨ç²¾åº¦åµŒå…¥==(ä½†æ˜¯ä¸å­˜å‚¨)==ï¼ŒåŸºäºä¸Šä¸€æ­¥å¾—åˆ°çš„è´¨å¿ƒè¿›è¡Œæ®‹å·®å‹ç¼©==(æ­¤æ—¶æ‰å¯¹æ®‹å·®ç¼–ç è¿›è¡Œå­˜å‚¨)==
> > > 3. å€’æ’ç´¢å¼•ï¼šæ„å»ºè´¨å¿ƒ$\text{â†’}$è´¨å¿ƒæ‰€åŒ…å«çš„åµŒå…¥çš„$\text{ID}$çš„åˆ—è¡¨ï¼Œå­˜å‚¨åˆ°ç£ç›˜ä¸­
> > >    ```txt
> > >    è´¨å¿ƒa -> å±äºè´¨å¿ƒaçš„åµŒå…¥ID=a1, a2, a3, ...
> > >    è´¨å¿ƒb -> å±äºè´¨å¿ƒbçš„åµŒå…¥ID=b1, b2, b3, ...
> > >    è´¨å¿ƒc -> å±äºè´¨å¿ƒcçš„åµŒå…¥ID=c1, c2, c3, ...
> > >    ```
> > >
> > > :three:åœ¨çº¿æŸ¥è¯¢æµç¨‹
> > >
> > > 1. æŸ¥è¯¢åµŒå…¥ï¼šåŸå§‹æŸ¥è¯¢$Q\xrightarrow[é¢„å¤„ç†(åµŒå…¥)]{\text{BERT}}$å¤šå‘é‡è¡¨ç¤º$\{q_1, q_2, \dots, q_n\}$
> > > 2. å€™é€‰ç”Ÿæˆï¼šæŸ¥æ‰¾ä¸æ¯ä¸ª$q_i$æœ€è¿‘çš„$n_{\text{probe}}\text{â‰¥}1$ä¸ªè´¨å¿ƒï¼Œæ”¶é›†æ¯ä¸ªè´¨å¿ƒä¸‹å±çš„$\{p_j\}$é›†åˆï¼Œå†æ”¶é›†ä¸$\{p_j\}$æœ‰å…³çš„æ®µè½æ˜¯ä¸ºå€™é€‰æ®µè½
> > > 3. åˆç­›æµç¨‹ï¼šè§£å‹$\{p_j\}$ä¸­æ‰€æœ‰çš„å‘é‡ï¼Œåˆ©ç”¨è§£å‹å‘é‡è®¡ç®—$Q$ä¸å€™é€‰æ®µè½çš„è¿‘ä¼¼è·ç¦»ï¼Œè¿™ä¸ªè¿‘ä¼¼è·ç¦»æ—¶åˆ™ä¸ºä¸€ä¸ªä¸‹ç•Œ
> > >    ```txt
> > >    ğŸ‘‰ä¸¾ä¸ªç®€å•ä¾‹å­
> > >      Q: {q1, q2, q3}
> > >      P: {p1, p2, p3, p4} â†’ {pj}é›†åˆä¸­ä»…æœ‰{p1, p2, p3}
> > >    ğŸ‘‰å®Œæ•´çš„è·ç¦»è®¡ç®—
> > >      Maxsim-1-full = Max{<q1,p1>,<q1,p2>,<q1,p3>,<q1,p4>}
> > >      Maxsim-2-full = Max{<q2,p1>,<q2,p2>,<q2,p3>,<q2,p4>}
> > >      Maxsim-3-full = Max{<q3,p1>,<q3,p2>,<q3,p3>,<q3,p4>}
> > >    ğŸ‘‰è¿‘ä¼¼çš„è·ç¦»è®¡ç®—
> > >      Maxsim-1-part = Max{<q1,p1>,<q1,p2>,<q1,p3>} â‰¤ Maxsim-1-full
> > >      Maxsim-2-part = Max{<q2,p1>,<q2,p2>,<q2,p3>} â‰¤ Maxsim-2-full
> > >      Maxsim-3-part = Max{<q3,p1>,<q3,p2>,<q3,p3>} â‰¤ Maxsim-3-full
> > >    ğŸ‘‰æ‰€ä»¥ä¸€å®šæ˜¯ä¸‹ç•Œ
> > >    ```
> > > 4. é‡æ’æµç¨‹ï¼šæ ¹æ®åˆç­›ç»“æœé€‰å–è‹¥å¹²æœ€ç›¸ä¼¼çš„æ®µè½ï¼Œè§£å‹å¾—åˆ°è¿™äº›æ®µè½çš„å…¨éƒ¨å‘é‡ï¼Œè®¡ç®—ç²¾ç¡®çš„ç›¸ä¼¼åº¦ä»¥å¾—åˆ°æœ€ç»ˆç»“æœ
>
> ## $\textbf{1.2. XTR}$æ¦‚è¿°
>
> > ### $\textbf{1.2.1. }$ç ”ç©¶çš„åŠ¨æœº
> >
> > > :one:é‡æ–°å®šä¹‰å¤šå‘é‡ç›¸ä¼¼åº¦é—®é¢˜ï¼š$\displaystyle\text{ColBERT}(Q,P)\text{=}\frac{1}{Z} \sum_{i=1}^{n} \sum_{j=1}^{m}(\textbf{P}\text{âˆ˜}\textbf{A})_{ij}$
> > >
> > > 1. æ•°æ®ç»“æ„ï¼š
> > >    - è¯„åˆ†çŸ©é˜µ$\textbf{S}$ï¼šä»¤æŸ¥è¯¢$Q\text{=}\left\{q_{1},q_2,\ldots,q_{n}\right\}$ä»¥åŠæ–‡æ¡£$P\text{=}\{p_1,p_2,...,p_m\}$ï¼Œè®°å­å†…ç§¯ä¸º$s_{ij}\text{=}{q}_{i}^{\top}{p}_{j}$ï¼Œç”±æ­¤æ„æˆ$\textbf{S}\text{âˆˆ}\mathbb{R}^{n\text{Ã—}m}$ 
> > >    - å¯¹é½çŸ©é˜µ$\textbf{A}$ï¼šè®©æ¯ä¸ªå…ƒç´ $a_{ij}\text{âˆˆ}\{0,1\}$æ¥å¯¹$\textbf{P}$ä¸­çš„å…ƒç´ è¿›è¡Œä¸åŒå¼ºåº¦çš„é€‰æ‹©ï¼Œç”±æ­¤æ„æˆ$\textbf{A}\text{âˆˆ}\mathbb{R}^{n\text{Ã—}m}$ 
> > > 2. $\text{ColBERT}$ç‰ˆæœ¬ï¼Œé€šè¿‡è°ƒæ•´å¯¹é½çŸ©é˜µ$\textbf{A}$ï¼Œè®©å…¶é€‰æ‹©è¯„åˆ†çŸ©é˜µ$\textbf{S}$æ¯è¡Œæœ€å¤§çš„ä¸€ä¸ªå€¼ï¼Œæœ€åé™¤ä»¥$Z$å½’ä¸€åŒ–
> > >    <img src="https://i-blog.csdnimg.cn/direct/c9aa508343f84d7d8c7fb7c73393c418.png" alt="image-20250306233530006" width=800 />   
> > > 3. ä¼ ç»Ÿçš„è®­ç»ƒæ–¹å¼ï¼šæœ€å¤§åŒ–æ‰¹å†…æ­£æ ·æœ¬${P}^{+}\text{âˆˆ}{P}_{1:B}\text{=}\left\lbrack{{P}_{1},\ldots ,{P}_{B}}\right\rbrack$çš„å¾—åˆ†ï¼Œå³æœ€å°åŒ–${\mathcal{L}}_{\mathrm{{CE}}}\textbf{= }â€“\log\cfrac{e^{\text{ColBERT}\left( {Q,{P}_{b}}\right)}}{\displaystyle{}\sum_{{b\textbf{=}1}}^{B}e^{\text{ColBERT}\left( {Q,{P}_{b}}\right)}}$ 
> > >
> > > :two:ä¼ ç»Ÿ$\text{ColBERT}$çš„æµç¨‹
> > >
> > > <img src="https://i-blog.csdnimg.cn/direct/acf6d1caa7a14872b6db3d6034254900.png" alt="image-20250313215730217" width=800 />   
> > >
> > > 1. $\text{Token}$æ£€ç´¢ï¼šç”¨æŸ¥è¯¢å•å‘é‡é›†ä¸­æ¯ä¸ª$q_i$æ£€ç´¢$k^\prime$ä¸ªæ®µè½$\text{Token}$ï¼Œæœ€å¤šäº§ç”Ÿ$n\text{Ã—}k^\prime$ä¸ªå€™é€‰$\text{Token}$
> > > 2. æ”¶é›†å‘é‡ï¼šåŠ è½½$n\text{Ã—}k^\prime$ä¸ªå€™é€‰$\text{Token}$æ‰€å±çš„æ®µè½ï¼Œæ”¶é›†è¿™äº›æ®µè½ä¸­æ‰€æœ‰çš„$\text{Token}$å‘é‡
> > > 3. è¯„åˆ†ä¸é‡æ’ï¼šå¯¹è¿™äº›æ®µè½åº”ç”¨å…¨ç²¾åº¦çš„$\text{ColBERT}$éçº¿æ€§ç›¸ä¼¼åº¦ä»¥è¿›è¡Œé‡æ’
> > >
> > > :three:$\text{XTR}$çš„åŠ¨æœº
> > >
> > > 1. ä¼ ç»Ÿ$\text{ColBERT}$é¢ä¸´çš„é—®é¢˜
> > >    - è®­ç»ƒä¸Šï¼šä¸æ¨ç†ä¸ä¸€è‡´ï¼Œä¼ ç»Ÿ$\text{ColBERT}$çš„æ—¨åœ¨ä¼˜åŒ–æœ€ç»ˆ$\text{ColBERT}$è¯„åˆ†ï¼Œè€Œæ¨ç†è¿‡ç¨‹æ—¨åœ¨è·å¾—$\text{Top-}k$çš„$\text{Token}$
> > >    - å¼€é”€ä¸Šï¼šæ”¶é›†$\text{Top-}k$å€™é€‰æ®µè½çš„å¤šæœ‰$\text{Token}$ç©ºé—´å¼€é”€å·¨å¤§ï¼Œç”±æ­¤åç»­ç²¾ç¡®è·ç¦»çš„è®¡ç®—æˆæœ¬ä¹Ÿå·¨å¤§
> > >    - æ³›åŒ–ä¸Šï¼š$\text{ColBERT}$çš„è¯„åˆ†å‡½æ•°æ˜¯éçº¿æ€§çš„ï¼Œé˜»ç¢äº†ä½¿ç”¨$\text{MIPS}$è¿›è¡Œæ£€ç´¢
> > > 2. $\text{XTR}$çš„æ”¹è¿›
> > >    - è®­ç»ƒé˜¶æ®µï¼šé‡æ–°è®¾è®¡äº†è®­ç»ƒç›®æ ‡å‡½æ•°ï¼Œä½¿å¾—æ¨¡å‹èƒ½ä¼˜å…ˆæ£€ç´¢å‡ºæœ€æœ‰ä»·å€¼çš„æ®µè½$\text{Token}$
> > >    - é‡æ’é˜¶æ®µï¼šå®Œå…¨çœå»å›æº¯(æ”¶é›†)æ­¥éª¤ï¼Œç›´æ¥åªç”¨æ£€ç´¢åˆ°çš„æ®µè½$\text{Token}$æ¥æ„æˆ
> > >    - ç¼ºå¤±è¡¥å……ï¼šåªè€ƒè™‘æ£€ç´¢åˆ°çš„$\text{Token}$éš¾å…æ¼æ‰ç›¸å…³çš„$\text{Token}$ï¼Œæ•…$\text{XTR}$è¿˜ä¼šå¯¹ç¼ºå¤±$\text{Token}$è¿›è¡Œè‡ªåŠ¨è¯„åˆ† 
> >
> > ### $\textbf{1.2.2. }$æ¨¡å‹è®­ç»ƒ
> >
> > > :one:æ‰¹å†…$\text{Token}$æ£€ç´¢çš„è®­ç»ƒç­–ç•¥
> > >
> > > 1. ç»™å®šä¸€ä¸ªæŸ¥è¯¢$Q\text{=}\{q_1,...,q_n\}$å’Œä¸€æ‰¹å…±$B$ä¸ªæ®µè½å‘é‡$P^{(i)}\text{=}\{p_1^{(i)},...,p_m^{(i)}\}$ 
> > >    <img src="https://i-blog.csdnimg.cn/direct/6e92a77acd8b435a80dff8cefdc940ce.png" width=550 /> 
> > > 2. ä¸ºæ¯ä¸ª$q_i$åœ¨æ‰€æœ‰çš„æ®µè½å‘é‡é›†ä¸­æ‰§è¡Œ$\text{Top-K}$æœç´¢ï¼Œå°†æ¯ä¸ª$q_i$çš„$\text{Top-K}$æ®µè½å‘é‡ç›¸åº”ä½è®¾ä¸º$1$  
> > >    <img src="https://i-blog.csdnimg.cn/direct/3159c71bf0d94227b1e8412280a7e6f7.png" width=665 /> 
> > > 3. å°†çŸ©é˜µæŒ‰æ®µè½æ‹†åˆ†ï¼Œå°±å¾—åˆ°äº†æ®µè½çš„å¯¹é½çŸ©é˜µ 
> > >    <img src="https://i-blog.csdnimg.cn/direct/e04a20e32dee4d3db4922de7e2f7b296.png" width=565 /> 
> > > 4. å°†æ¯è¡Œè¢«æ¿€æ´»çš„å­ç›¸ä¼¼åº¦çš„æœ€å¤§å€¼ç›¸åŠ ï¼Œå†é™¤ä»¥å½’ä¸€åŒ–å‚æ•°$Z$(å³æœ‰å‡ è¡Œæœ‰è¢«æ¿€æ´»çš„ç›¸ä¼¼åº¦)ï¼Œå¾—åˆ°æœ€ç»ˆçš„ç›¸ä¼¼åº¦è¯„åˆ† 
> > >    <img src="https://i-blog.csdnimg.cn/direct/865a5b343b2347a6b53b7768b1220c22.png" width=490 />   
> > > 5. é›¶å¤„ç†æœºåˆ¶ï¼šå½“ä¸€ä¸ªæ®µè½æ‰€æœ‰$\text{Token}$éƒ½æ²¡æœ‰è¶³å¤Ÿé«˜ç›¸ä¼¼åº¦(å¯¹é½çŸ©é˜µå…¨$0$)ï¼Œä¼šå°†å½’ä¸€åŒ–å‚æ•°$Z$è®¾ä¸ºå¾ˆå°çš„ä¸€ä¸ªæ•°é¿å…é™¤ä»¥$0$ 
> > >
> > > :two:ä¸ä¼ ç»Ÿ$\text{ColBERT}$è®­ç»ƒçš„å¯¹æ¯”ï¼šè¿˜æ˜¯å›åˆ°åŸæ¥çš„ä¾‹å­
> > >
> > > 1. $\text{ColBERT}$ï¼šä¸è®º$P^+$è¢«é€‰æ‹©ä¸å¦ï¼Œéƒ½ä¼šè¢«ç»™äºˆå¾ˆé«˜çš„å¾—åˆ†ï¼Œå¯¼è‡´æ¨¡å‹æœ€ç»ˆæ— æ³•æ­£ç¡®é€‰å‡º$P^+$
> > >2. $\text{XTR}$ï¼šæç«¯æƒ…å†µå¦‚$P^+$çš„æ¯ä¸ª$\text{Token}$éƒ½ä¸æ˜¯$q_i$çš„$\text{Top-K}$ï¼Œå¯¼è‡´$P^+$è¢«æ‰“é›¶åˆ†é€ æˆé«˜æŸå¤±ï¼Œè¿«ä½¿æ¨¡å‹è°ƒæ•´ä»¥èƒ½æ­£ç¡®é€‰æ‹©$P^+$ 
> >
> > ### $\textbf{1.2.3. }$æ¨ç†é˜¶æ®µ
> >
> > > :one:è·å–å€™é€‰æ–‡æ¡£ï¼š
> > >
> > > 1. $\text{MIPS}$æ£€ç´¢ï¼šå¯¹æ‰€æœ‰$n$ä¸ªæŸ¥è¯¢å‘é‡$q_i$æ‰§è¡Œ$\text{Top-}k^\prime$æ£€ç´¢ï¼Œå¾—åˆ°$k^\prime$ä¸ªæœ€ç›¸ä¼¼çš„æ®µè½$\text{Token}$
> > > 2. å›æº¯(ä½†ä¸æ”¶é›†)ï¼šå›æº¯è¿™$nk^\prime$ä¸ª$\text{Token}$æ‰€å±çš„æ–‡æ¡£ï¼Œç¡®å®š$C$ä¸ªå€™é€‰æ–‡æ¡£
> > >
> > > :two:ç›¸ä¼¼åº¦å¡«å……ï¼š
> > >
> > > 1. æ’åºï¼šå…¶æ£€ç´¢$q_i$çš„$\text{Top-}k$ä¸º$p_{(1)},p_{(2)},...,p_{(k)}$ï¼Œå‡è®¾è¿™äº›$\text{Token}$ä¸$q_i$çš„ç›¸ä¼¼åº¦ä»é«˜åˆ°ä½ä¸º$\left\langle{q_i,p_{(1)}}\rangle,...,\langle{q_i,p_{(k)}}\right\rangle$ 
> > >    <img src="https://i-blog.csdnimg.cn/direct/e7c71aac337b4951a785d7d4c5ca55d3.png" width=663 /> 
> > > 2. å¡«å……ï¼šä»¤è¢«æ£€ç´¢åˆ°çš„$\text{Token}$ä¸­çš„ç›¸ä¼¼åº¦æœ€ä½è€…ä¸º$m_i\text{=}\langle{q_i,p_{(k)}}\rangle$ï¼Œç›´æ¥ç”¨$m_i$å»å¡«å……ä¸€åˆ‡å…¶å®ƒ(æœªè¢«æ£€ç´¢åˆ°$\text{Token}$)çš„ç›¸ä¼¼åº¦
> > >    <img src="https://i-blog.csdnimg.cn/direct/cc78f7dc4b79476c8cc05a9908c0fa76.png" width=655 /> 
> > > 3. è¯„åˆ†ï¼šå¡«å……åå†å–æ¯ä¸ªæ®µè½ç›¸ä¼¼åº¦çŸ©é˜µæ¯è¡Œç›¸ä¼¼åº¦çš„æœ€å¤§å€¼ç›¸åŠ ï¼Œç„¶åé™¤ä»¥è¡Œæ•°å½’ä¸€åŒ–ï¼Œé¿å…äº†æŸä¸€è¡Œè´¡çŒ®çš„ç›¸ä¼¼åº¦ä¸º$0$ 
> > >
> > >    <img src="https://i-blog.csdnimg.cn/direct/19fe0c8a759f42d1b2b56b5da2fd2b53.png" alt="image-20250323015940873" width=785 /> 
>
> ## $\textbf{1.3. ColXTR}$åŸç†
>
> > :one:$\text{ColXTR}$æ¦‚è¿°ï¼šé›†æˆ$\text{ColBERTv2}$çš„ä¼˜åŒ–æ¥å¢å¼º$\text{XTR}$
> >
> > 1. è®­ç»ƒé˜¶æ®µï¼š
> >    - ä¿ç•™$\text{XTR}$è®­ç»ƒç›®æ ‡ï¼šå³ä»ç„¶é‡‡ç”¨$\text{Token}$æ£€ç´¢çº§ä¼˜åŒ–ï¼Œè€Œéæ®µè½çº§è¯„åˆ†çš„ä¼˜åŒ–
> >    - å¢åŠ é™ç»´æŠ•å½±å±‚ï¼šè®­ç»ƒè¿‡ç¨‹ä¸­å¼•å…¥é™ç»´æŠ•å½±ï¼Œè¯•å›¾é™ä½æ¯ä¸ª$\text{Token}$çš„å‘é‡çš„ç»´åº¦ 
> > 2. æ¨ç†é˜¶æ®µï¼š
> >    - $\text{XTR}$ï¼šç›´æ¥ä½¿ç”¨$\text{ScaNN}$åº“å­˜å‚¨ç²¾ç¡®çš„å‘é‡ï¼Œä¸è¿›è¡Œä»»ä½•å‹ç¼©ï¼Œä»è€Œä½¿å¾—ç©ºé—´éœ€æ±‚å·¨å¤§
> >    - $\text{ColXTR}$ï¼šå¼•å…¥äº†$\text{ColBERTv2}$çš„æ®‹å·®å‹ç¼©æœºåˆ¶ï¼Œå¤§å¹…é™ä½å­˜å‚¨éœ€æ±‚
> >
> > :two:$\text{ColXTR}$ç´¢å¼•ï¼šå…¨ç›˜é‡‡çº³$\text{ColBERTv2}$çš„ä¸‰é˜¶æ®µç´¢å¼•ï¼Œå¹¶ç”¨$\text{T5}$ç¼–ç å™¨(å’Œ[$\text{Aligner}$](https://dannhiroaki.blog.csdn.net/article/details/146194192)ä¸€æ ·)åµŒå…¥
> >
> > 1. è¿‘ä¼¼è´¨å¿ƒï¼šæŠ½å–ä¸€éƒ¨åˆ†æ®µè½$\text{Token}$æ‰§è¡ŒåµŒå…¥ï¼Œå†å¯¹éƒ¨åˆ†çš„åµŒå…¥å‘é‡æ‰§è¡Œ$\sqrt{n_{\text{embeddings}}}\text{-Means}$èšç±»ï¼Œå¾—åˆ°$\sqrt{n_{\text{embeddings}}}$ä¸ªè´¨å¿ƒ
> > 2. å‹ç¼©ç¼–ç ï¼šå¯¹æ‰€æœ‰çš„æ®µè½è¿›è¡Œå…¨ç²¾åº¦åµŒå…¥==(ä½†æ˜¯ä¸å­˜å‚¨)==ï¼ŒåŸºäºä¸Šä¸€æ­¥å¾—åˆ°çš„è´¨å¿ƒè¿›è¡Œæ®‹å·®å‹ç¼©==(æ­¤æ—¶æ‰å¯¹æ®‹å·®ç¼–ç è¿›è¡Œå­˜å‚¨)==
> > 3. å€’æ’ç´¢å¼•ï¼šæ„å»ºè´¨å¿ƒ$\text{â†’}$è´¨å¿ƒæ‰€åŒ…å«çš„åµŒå…¥çš„$\text{ID}$çš„åˆ—è¡¨ï¼Œå­˜å‚¨åˆ°ç£ç›˜ä¸­
> >
> >    ```txt
> >    è´¨å¿ƒa -> å±äºè´¨å¿ƒaçš„åµŒå…¥ID=a1, a2, a3, ...
> >    è´¨å¿ƒb -> å±äºè´¨å¿ƒbçš„åµŒå…¥ID=b1, b2, b3, ...
> >    è´¨å¿ƒc -> å±äºè´¨å¿ƒcçš„åµŒå…¥ID=c1, c2, c3, ...
> >    ```
> >
> > :three:$\text{ColXTR}$æŸ¥è¯¢ï¼šå‡è®¾æŸ¥è¯¢$Q$è¢«ç¼–ç ä¸ºå¤šå‘é‡è¡¨ç¤º$\{q_1,q_2,...,q_n\}$ 
> >
> > 1. å€™é€‰ç”Ÿæˆï¼šåŸå§‹$\text{XTR}$ç›´æ¥å¯¹$\{p_j\}$è¿›è¡Œ$\text{MIPS}$æœç´¢ç”Ÿæˆå€™é€‰æ®µè½ï¼Œ$\text{ColXTR}$å…ˆå¯¹è´¨å¿ƒè¿›è¡Œ$\text{MIPS}$æœç´¢ï¼Œå†å€’æ’ç´¢å¼•å›å€™é€‰æ®µè½
> >    <img src="https://i-blog.csdnimg.cn/direct/e474bcbc35854a8eb570cd17af44e2de.png" width=550 /> 
> >    - è´¨å¿ƒæœç´¢ï¼šè®¡ç®—æ‰€æœ‰$q_i$ä¸æ‰€æœ‰è´¨å¿ƒ$c_j$çš„ç›¸ä¼¼åº¦ï¼Œç¡®å®šæ¯ä¸ª$q_i$çš„$\text{Top-}k$ä¸ªè´¨å¿ƒï¼Œåˆå¹¶åå¾—åˆ°å€™é€‰è´¨å¿ƒé›†$\{c_j\}$
> >    - å€’æ’ç´¢å¼•ï¼šé€šè¿‡å€’æ’ç´¢å¼•ï¼Œå°†å€™é€‰è´¨å¿ƒå›æº¯å¾—åˆ°ä¸æ¯ä¸ªè´¨å¿ƒæœ‰å…³çš„æ®µè½åµŒå…¥ï¼Œæ˜¯ä¸ºå€™é€‰å‘é‡é›†$\{p_j\}$
> >    - å€™é€‰ç”Ÿæˆï¼šæ‰¾åˆ°æ‰€æœ‰ä¸$\{p_j\}$ç§å‘é‡æœ‰å…³çš„æ®µè½ï¼Œä»è€Œæ„æˆå€™é€‰æ®µè½é›†$\{P_1,P_2,...,P_N\}$  
> > 2. å†…ç§¯è®¡ç®—ï¼šè§£å‹ä»¥è·å¾—$\{p_j\}$ä¸­æ‰€æœ‰å‘é‡çš„å…¨ç²¾åº¦è¡¨ç¤ºï¼Œè®©æŸ¥è¯¢å‘é‡é›†$\{q_i\}$å’Œæ®µè½å‘é‡é›†$\{p_j\}$ä¸­å‘é‡ä¸¤ä¸¤ç®—å†…ç§¯$\langle{q_i,p_j}\rangle$ 
> >    <img src="https://i-blog.csdnimg.cn/direct/30edd682e8d74597b21790937b810609.png" width=550 />  
> > 3. ç›¸ä¼¼å¡«å……ï¼šç”¨æ¯è¡Œæœ€å°çš„ç›¸ä¼¼åº¦å€¼ï¼Œå¡«å……æ¯è¡Œå‰©ä½™çš„ç›¸ä¼¼åº¦å€¼ï¼Œæœ€ç»ˆè¾“å‡ºæ¯ä¸ªå€™é€‰æ®µè½æ¯è¡Œæœ€å¤§å€¼çš„å¹³å‡(å³ä¸ºè¿‘ä¼¼ç›¸ä¼¼åº¦)
> >    <img src="https://i-blog.csdnimg.cn/direct/9a2adbda000f496085bcf6efd84689ee.png" width=550 />  
> > 4. æ®µè½é‡æ’ï¼šé€‰å–è‹¥å¹²è¿‘ä¼¼è¯„åˆ†æœ€é«˜çš„æ®µè½ï¼Œè§£å‹å…¶æ‰€æœ‰çš„å‘é‡ä»è€Œè®¡ç®—ç²¾ç¡®çš„ç›¸ä¼¼åº¦ï¼Œå³å¯å¾—åˆ°ç²¾ç¡®çš„æœ€ç›¸ä¼¼æ®µè½

# $\textbf{2. }$å®éªŒåŠç»“æœ

> :one:å®éªŒè®¾ç½®
>
> 1. æ¨¡å‹è®¾ç½®ï¼šåœ¨$\text{MS-MARCO}$ä¸Šå¯¹$\text{T5-base}$ç¼–ç å™¨è¿›è¡Œå¾®è°ƒï¼Œå¹¶åœ¨é¡¶å±‚è®¾ç½®ä¸€ä¸ª$\text{768â†’128}$çš„æŠ•å½±å±‚
> 2. è®­ç»ƒè®¾ç½®ï¼šè®¾ç½®$\text{XTR}$ä¸­è®­ç»ƒçš„$k\text{=}320$ï¼Œä¸€æ‰¹æ ·æœ¬$\text{48}$ä¸ª(å…¶ä¸­éš¾è´Ÿæ ·æœ¬ç”±$\text{BM25}$æŒ–æ˜å‡º)ï¼Œè®­ç»ƒ$\text{50K}$æ­¥
> 3. æ£€ç´¢è®¾ç½®ï¼šè®©æ¯ä¸ª$q_i$å…ˆæ¢æµ‹$\text{10}$ä¸ªè´¨å¿ƒï¼Œå¯¹å°ç´¢å¼•è®¾ç½®å€’æ’ç´¢å¼•åˆ°$k\text{=}500$ä¸ª$p_j/$å¤§ç´¢å¼•åˆ™$k\text{=}10000$ä¸ª
>
> :two:å®éªŒç»“æœ
>
> 1. æ€§èƒ½ä¸Šï¼š$\text{ColXTR}$æ¯”$\text{COlBERT}$å’Œ$\text{XTR}$éƒ½è¦å·®ï¼Œæˆ‘ä¸ç†è§£è¿™ç¯‡æ–‡ç« ä¸ºä»€ä¹ˆè¦é‡æ–°è®­ç»ƒ$\text{ColBERT}$ï¼Œä»–å¦ˆæ€§èƒ½å½“ç„¶æ¯”ä¸è¿‡å•Š
> 2. å¼€é”€ä¸Šï¼šä½ éƒ½ä»–å¦ˆå‹ç¼©äº†å¼€é”€å½“ç„¶å°å•Šï¼Œæ€§èƒ½åˆæ‰“ä¸è¿‡ï¼Œè¿™ç§æ–‡ç« è¿˜èƒ½å‘$\text{COLING'25}$å¥¶å¥¶çš„
>
> :three:ä¼˜åŒ–åˆ†æ
>
> 1. è¿™ä¸€éƒ¨åˆ†å†…å®¹ä¹Ÿç›¸å½“æ— èŠ
> 2. å°±æ˜¯å•Šæˆ‘ä»¬çš„ä¼˜åŒ–ï¼Œå“å“Ÿå’Œ$\text{XTR}$ä¸€æ ·é™ä½äº†æ¨ç†å¼€é”€ï¼Œé‚£ä¸ªå’Œ$\text{ColBERTv2}$ä¸€æ ·é™ä½äº†å­˜å‚¨å¼€é”€
> 3. æ‰€ä»¥$\text{ColXTR}$æ€§èƒ½è¿ä¼ ç»Ÿ$\text{ColBERT}$éƒ½ä¸å¦‚ï¼Œä½†æˆ‘ä»¬å°±æ˜¯ç‰›é€¼
