@[toc]

[åŸæ–‡ç« : $\text{RoarGraph: A Projected Bipartite Graph for Efficient Cross-Modal Approximate Nearest Neighbor Search}$](https://doi.org/10.14778/3681954.3681959)

# $\textbf{1. }$å¯¼è®º

> ## $\textbf{1.1. }$ç ”ç©¶èƒŒæ™¯
>
> > :one:è·¨æ¨¡æ€æ£€ç´¢ï¼š
> >
> > 1. å«ä¹‰ï¼šä½¿ç”¨æŸä¸ªæ¨¡æ€çš„æ•°æ®ä½œä¸º$\text{query}$ï¼Œè¿”å›å¦ä¸€ä¸ªæ¨¡æ€ä¸­è¯­ä¹‰ç›¸ä¼¼çš„å†…å®¹
> > 2. ç¤ºä¾‹ï¼šè¾“å…¥`"Apple"`åï¼Œè¿”å›è‹¹æœçš„ç…§ç‰‡
> >
> > :two:æ¨¡æ€å·®è·$\text{(gap)}$ï¼šä¸åŒæ¨¡æ€æ•°æ®å³ä½¿æ˜ å°„åˆ°åŒä¸€è¯­ä¹‰ç©ºé—´(æ¯”å¦‚ç”¨$\text{CLIP}$)ï¼Œå…¶åˆ†å¸ƒç‰¹å¾ä»å·®è·æ˜¾è‘—
> >
> > $\quad$<img src="https://i-blog.csdnimg.cn/direct/bb909726a7274ce795269abed46d8b05.png" alt="image-20250103234040081" width=400 /> 
> >
> > :three:ä¸¤ç§$\text{ANN}$
> >
> > 1. å•æ¨¡æ€$\text{ANN}$ï¼šæŸ¥è¯¢å‘é‡åˆ†å¸ƒ$\xleftrightarrow{\text{ID}}$åŸºç¡€æ•°æ®åˆ†å¸ƒï¼Œå³æŸ¥è¯¢æ¥æºäºä¸æ•°æ®åº“æ•°æ®**ç›¸åŒ**çš„åˆ†å¸ƒ
> > 2. è·¨æ¨¡æ€$\text{ANN}$â€‹ï¼šæŸ¥è¯¢å‘é‡åˆ†å¸ƒ$\xleftrightarrow{\text{OOD}}$åŸºç¡€æ•°æ®åˆ†å¸ƒï¼Œå³æŸ¥è¯¢æ¥æºäºä¸æ•°æ®åº“æ•°æ®**ä¸åŒ**çš„åˆ†å¸ƒ
>
> ## $\textbf{1.2. }$æœ¬æ–‡çš„ç ”ç©¶
>
> > :one:ç ”ç©¶åŠ¨æœºï¼šå½“å‰$\text{SOTA}$çš„$\text{ANN}$â€‹éƒ½æ˜¯å•æ¨¡æ€çš„ï¼Œåœ¨$\text{OOD}$è´Ÿè½½ä¸Šè¡¨ç°å·®
> >
> > :two:ç ”ç©¶å†…å®¹
> >
> > 1. $\text{OOD}$å·¥ä½œè´Ÿè½½åˆ†æï¼šè·¨æ¨¡æ€åæ€§èƒ½ä¸‹é™ï¼ŒæºäºæŸ¥è¯¢è¿‡è¿œ$+$æ ‡ç­¾åˆ†æ•£$\text{â†’}$æ”¶æ•›å˜æ…¢$/$è·³æ•°å¢åŠ 
> >    |        ç±»å‹        | æŸ¥è¯¢$\boldsymbol{\xleftrightarrow{è·ç¦»}}$åŸºç¡€æ•°æ® | æŸ¥è¯¢æœ€é‚»è¿‘$\boldsymbol{i\xleftrightarrow{è·ç¦»}}$æŸ¥è¯¢æœ€é‚»è¿‘ | æŸ¥è¯¢$\boldsymbol{\xleftrightarrow{åˆ†å¸ƒ}}$åŸºç¡€æ•°æ® |
> >    | :----------------: | :-----------------------------------------------: | :--------------------------------------------------------: | :-----------------------------------------------: |
> >    | å•æ¨¡æ€$\text{ANN}$ |                   è¿‘(åŸºæœ¬å‡è®¾)                    |                        è¿‘(åŸºæœ¬å‡è®¾)                        |                    $\text{ID}$                    |
> >    | è·¨æ¨¡æ€$\text{ANN}$ |                   è¿œ(å®éªŒå¾—åˆ°)                    |                        è¿œ(å®éªŒå¾—åˆ°)                        |                   $\text{OOD}$                    |
> > 2. $\text{RoarGraph}$çš„æå‡ºï¼š  
> >    - åŸç†ï¼šè®©æŸ¥è¯¢å‚ä¸å›¾æ„å»º$\text{â†’}$å°†[æŸ¥è¯¢ç‚¹$\xleftrightarrow{}$åŸºç¡€ç‚¹]é‚»æ¥å…³ç³»æŠ•å½±åˆ°åŸºç¡€ç‚¹$\text{â†’}$å½¢æˆä»…æœ‰åŸºç¡€ç‚¹çš„å›¾
> >    - æ„ä¹‰ï¼šè®©ç©ºé—´ä¸Šå¾ˆè¿œä½†æ˜¯æŸ¥è¯¢ä¸Šå¾ˆè¿‘çš„ç‚¹ç›¸è¿ï¼Œä»è€Œèƒ½é«˜æ•ˆå¤„ç†$\text{OOD-ANNS}$
> >       <img src="https://i-blog.csdnimg.cn/direct/4f4512ff6bfc455d9e096f7393b2d773.png" alt="image-20250104005140458" width=390 /> 
> >    - æ•ˆæœï¼šåœ¨è·¨æ¨¡æ€æ•°æ®é›†ä¸Šå®ç°äº†$\text{QPS}$å’Œ$\text{Recall}$æŒ‡æ ‡çš„æå‡
>
> ## $\textbf{1.3. }$æœ‰å…³å·¥ä½œ
>
> > |         æ–¹æ³•         | æ ¸å¿ƒæ€æƒ³                                | ä¼˜ç¼ºç‚¹                         |
> > | :------------------: | :--------------------------------------- | :------------------------------ |
> > |      æŸæœç´¢ç»ˆæ­¢      | åˆ©ç”¨æŸ¥è¯¢è®­ç»ƒåˆ†ç±»æ¨¡å‹åˆ¤æ–­ä½•æ—¶ç»ˆæ­¢æœç´¢    | æå‡æ•ˆç‡ï¼Œä½†è®­ç»ƒæˆæœ¬è¾ƒé«˜       |
> > | å›¾å·ç§¯$\text{(GCN)}$ | å¼•å…¥$\text{GCN}$å­¦ä¹ æœ€ä¼˜æœç´¢è·¯å¾„        | è·¯å¾„ä¼˜åŒ–æ˜æ˜¾ï¼Œä½†è®­ç»ƒæˆæœ¬è¾ƒé«˜   |
> > |   $\text{GCN+RL}$    | å¼ºåŒ–å­¦ä¹ ä¸$\text{GCN}$ç»“åˆå¼•å¯¼æœç´¢è·¯ç”±  | æå‡æ•ˆæœæ˜¾è‘—ï¼Œä½†è®­ç»ƒæˆæœ¬è¾ƒé«˜   |
> > |    $\text{GraSP}$    | æ¦‚ç‡æ¨¡å‹ä¸å­å›¾é‡‡æ ·å­¦ä¹ è¾¹é‡è¦æ€§          | æ€§èƒ½ä¼˜åŒ–æ˜æ˜¾ï¼Œä½†ç´¢å¼•æ„å»ºæˆæœ¬é«˜ |
> > |    $\text{ScaNN}$    | ç»“åˆå‘é‡é‡åŒ–å’Œ$\text{PQ}$è¿›è¡Œåˆ†åŒºä¸å‹ç¼© | å‹ç¼©ä¸æœç´¢æ€§èƒ½é«˜æ•ˆï¼Œä½†ä¾èµ–è°ƒå‚ |

# $\textbf{2. }$å¯¹$\textbf{OOD}$è´Ÿè½½çš„åˆ†æä¸éªŒè¯

> ## $\textbf{2.1. }$åˆæ­¥çš„èƒŒæ™¯åŠå…¶éªŒè¯
>
> > ### $\textbf{2.1.1. }$å¯¹æ¨¡æ€å·®è·çš„éªŒè¯
> >
> > > :one:$\text{OOD}$çš„é‡åŒ–
> > >
> > > |         è·ç¦»ç±»å‹         | è¡¡é‡ä»€ä¹ˆ                 | å¦‚ä½•ç†è§£                           |
> > > | :----------------------: | :----------------------- | :--------------------------------- |
> > > | $\text{Wasserstein}$è·ç¦» | ä¸¤ä¸ªåˆ†å¸ƒé—´çš„å·®å¼‚         | æŠŠä¸€ä¸ªåˆ†å¸ƒæ¬åˆ°å¦ä¸€ä¸ªçš„**æœ€å°ä»£ä»·** |
> > > | $\text{Mahalanobis}$è·ç¦» | ä¸€ä¸ªå‘é‡åˆ°ä¸€ä¸ªåˆ†å¸ƒçš„è·ç¦» | ä¸€ä¸ªç‚¹ç›¸å¯¹äºä¸€ä¸ªåˆ†å¸ƒçš„**å¼‚å¸¸ç¨‹åº¦** |
> > >
> > > :one:å®éªŒ$1$ï¼šç”¨$\text{Wasserstein}$è·ç¦»è¡¡é‡$\text{OOD}$ç‰¹æ€§
> > >
> > > 1. æ•°æ®é›†ï¼šåŸºç¡€æ•°æ®é›†ä¸­æŠ½å–çš„æ— äº¤å‰é›†$B_1/B_2$ï¼Œ$\text{OOD}$çš„æŸ¥è¯¢é›†$Q$
> > > 2. ç»“æœï¼š$\text{Wasserstein}(B_1,Q)$å’Œ$\text{Wasserstein}(B_2,Q)$ï¼Œå¤§è‡´æ˜¯$\text{Wasserstein}(B_1,B_2)$ä¸¤å€
> > >
> > > :two:å®éªŒ$2$ï¼šç”¨$\text{Mahalanobis}$è·ç¦»è¡¡é‡$\text{OOD}$ç‰¹æ€§
> > >
> > > 1. æ•°æ®é›†ï¼šæ»¡è¶³åˆ†å¸ƒ$P$çš„åŸºç¡€æ•°æ®ï¼Œæ¥è‡ª$\text{ID}$æŸ¥è¯¢é›†çš„$q_{id}$ï¼Œæ¥è‡ª$\text{OOD}$æŸ¥è¯¢é›†çš„$q_{ood}$
> > > 2. ç»“æœï¼š$\text{Mahalanobis}(q_{\text{id}},P)\text{<}\text{Mahalanobis}(q_{\text{ood}},P)$ 
> >
> > ### $\textbf{2.1.2. }\textbf{SOTA-ANN}$åœ¨$\textbf{OOD}$ä»»åŠ¡ä¸Šçš„è¡¨ç°
> >
> > > :one:å¯¹ä¼ ç»Ÿçš„$\text{SOTA-ANN}$
> > >
> > > |    ç´¢å¼•æ–¹æ³•     | åœ¨$\textbf{OOD}$ä¸Šçš„è¡¨ç°(ç›¸æ¯”åœ¨$\textbf{ID}$ä¸Š)              |
> > > | :-------------: | :------------------------------------------------------------ |
> > > |  $\text{HNSW}$  | æ€§èƒ½æ˜¾è‘—ä¸‹é™ï¼Œåœ¨$\text{BeamSearch}$è¿‡ç¨‹æ˜¾è‘—è®¿é—®æ›´å¤šçš„ç»“ç‚¹(è¦ç»å†æ›´å¤šè·³) |
> > > | $\text{IVF-PQ}$ | æ€§èƒ½æ˜¾è‘—ä¸‹é™ï¼Œéœ€è¦æ›´å¤šçš„èšç±»æ•°æ‰èƒ½è¾¾åˆ°ç›¸åŒçš„$\text{Recall}$  |
> > >
> > > :two:å¯¹æ”¹è¿›çš„$\text{ANN}$ï¼šé’ˆå¯¹$\text{OOD-ANNS}$çš„é¦–ä¸ªå›¾ç´¢å¼•$\text{RobustVamana(OOD-DiskANN)}$  
> > >
> > > 1. åŸç†ï¼šå…ˆç”¨$\text{Vamana}$å»ºå›¾ï¼Œç„¶åå†ç”¨$\text{RobustStitch}$æ ¹æ®æŸ¥è¯¢å‘é‡ï¼Œè¿æ¥æ–°çš„è¾¹
> > > 2. æ€§èƒ½ï¼šæ¯”$\text{DiskANN}$åœ¨$\text{OOD}$ä»»åŠ¡ä¸Šæå‡äº†$\text{40\%}$æ€§èƒ½ï¼Œä½†æ˜¯æŸ¥è¯¢é€Ÿåº¦æ…¢äº†${\text{Ã—}4\text{-10}}$
>
> ## $\textbf{2.2. }$å¯¹$\textbf{OOD}$ä¸Š$\textbf{ANN}$å·¥ä½œè´Ÿè½½çš„åˆ†æ
>
> > ### $\textbf{2.2.1. OOD-ANNS}$å’Œ$\textbf{ID-ANNS}$çš„ä¸¤ä¸ªå·®å¼‚
> >
> > > :one:ä¸¤ç§å·®å¼‚åŠå®éªŒç»“æœ
> > >
> > > 1. $\text{OOD}$æŸ¥è¯¢ç¦»å…¶æœ€é‚»è¿‘å¾ˆè¿œï¼šå³$\delta\left(q_{\text{ood}}, i^{t h} \text{-NN}_{\text{ood}}\right) \text{â‰«} \delta\left(q_{\text{id}}, i^{t h} \text{-NN}_{\text{id}}\right)$ï¼Œå·¦ä¸º$i\text{=}1$æ—¶çš„åˆ†å¸ƒç»“æœ
> > > 2. $\text{OOD}$æŸ¥è¯¢çš„æœ€é‚»è¿‘å½¼æ­¤åŸç†ï¼š$100^{t h} \text{-NN}$äº’ç›¸ä¹‹é—´çš„å¹³å‡è·ç¦»ï¼Œå®éªŒç»“æœå¦‚å³
> > >    <img src="https://i-blog.csdnimg.cn/direct/5061971fc661498489a62e2b56e2afa8.png" alt="image-20250104144814904" width=230 /> <img src="https://i-blog.csdnimg.cn/direct/419820e665d94db786f5f0b1a2065c12.png" alt="image-20250104150124562" width=230 />  
> > >
> > > :two:å¯¹å·®å¼‚çš„ç›´è§‚ç†è§£
> > >
> > > 1. ç®€å•(æ¦‚å¿µ)ç¤ºä¾‹ï¼š
> > >    <img src="https://i-blog.csdnimg.cn/direct/5298aad2e05c4401ac86e4d98ac10db2.png" alt="image-20250104150619812" width=400 /> 
> > >    - $\text{ID}$æŸ¥è¯¢ï¼šæŸ¥è¯¢ä¸å…¶æœ€é‚»è¿‘åœ¨çƒé¢ä¸Šï¼Œç›¸äº’é è¿‘
> > >    - $\text{ODD}$æŸ¥è¯¢ï¼šæŸ¥è¯¢åœ¨çƒå¿ƒï¼Œå…¶æœ€é‚»è¿‘åœ¨çƒé¢ä¸Š(ç”±æ­¤è·ç¦»è¾ƒè¿œä¸”æŸ¥è¯¢ä¸å¤š$\text{+}$åˆ†æ•£åˆ†å¸ƒ)
> > > 2. çœŸå®ç¤ºä¾‹ï¼šçœŸå®æ•°æ®$\text{PCA}$é™åˆ°äºŒç»´çš„è§†å›¾ï¼Œ$\text{ID}$æŸ¥è¯¢æ›´ä¸ºé›†ä¸­
> > >    <img src="https://i-blog.csdnimg.cn/direct/ff1e0512f7ed4245a7f2c5e4ac3d9725.png" alt="image-20250104151013397" width=540 /> 
> >
> > ### $\textbf{2.2.2. }$ä¸ºä½•ä¼ ç»Ÿ$\textbf{SOTA-ANN}$åœ¨$\textbf{ODD}$è¡¨ç°ä¸ä½³
> >
> > > :zero:ä¼ ç»Ÿ$\text{ANN}$çš„è®¾è®¡
> > >
> > > 1. åŸºäºä¸¤å‡è®¾ï¼šæŸ¥è¯¢$/$æ•°æ®åŒåˆ†å¸ƒ$+k$ä¸ªæœ€è¿‘é‚»å½¼æ­¤ç›¸äº’é è¿‘(é‚»å±…çš„é‚»å±…æ˜¯é‚»å±…)ï¼Œåˆšå¥½å…¨åçš„
> > > 2. è®¾è®¡çš„æ€è·¯ï¼š
> > >    - å»ºå›¾ï¼šç”¨$\text{BeamSearch}$æ¥æ„å»º$\text{KNN}$å›¾$\text{â†’}$ç©ºé—´ä¸­ç›¸è¿‘çš„ç‚¹è½¬åŒ–ä¸ºå›¾ä¸­ç´§å¯†è¿æ¥çš„ç»“ç‚¹
> > >    - æœç´¢ï¼šä»ä¸­å¿ƒç‚¹å¼€å§‹$\text{GreedySearch}$
> > >
> > > :one:åœ¨åŸºäºå›¾$\text{ANN}$ä¸Šï¼š$\text{OOD}$ä¼šä½¿å¾—æœç´¢ç©ºé—´å¢å¤§
> > >
> > > 1. å¯è¯†åˆ«æœç´¢ç©ºé—´ï¼šåŒ…å›´å½“å‰è®¿é—®ç»“ç‚¹$x$çš„$B^{s}(x)\text{+}B^{k}\left(1^{\text{st}}\text{-NN}, R\right)$
> > >    - çƒ$B^{k}\left(1^{\text{st}}\text{-NN}, R\right)$ï¼šä»¥$1^{\text{st}}\text{-NN}$ä¸ºçƒå¿ƒï¼Œ$k$é‚»è¿‘é—´äº’ç›¸è·ç¦»$\delta\left(i^{\text{th}}\text{-NN}, j^{\text{th}}\text{-NN}\right)$æœ€å¤§å€¼ä¸ºåŠå¾„
> > >    - çƒ$B^{s}(x)$ï¼šä»¥å½“å‰ç»“ç‚¹$x$ä¸ºåœ†å¿ƒï¼Œä»¥$\delta\left(x, i^{\text{th}}\text{-NN}\right)$çš„æœ€å¤§å€¼(åˆ°æœ€è¿œæœ€é‚»è¿‘çš„è·ç¦»)ä¸ºåŠå¾„
> > > 2. $\text{OOD}$çš„å½±å“ï¼šæœç´¢ç©ºé—´å¤§å¹…å¢å¤§
> > >    - å¯¹$B^{k}$ï¼šç”±äº$\text{OOD}$çš„æ€§è´¨$R_{\text {ood }}\text{â‰«}R_{\text{id}}$ï¼Œè¿™ä¸€å·®å¼‚åœ¨ä½“ç§¯å±‚é¢æ”¾å¤§åˆ°$\left(\cfrac{R_{\text {ood }}}{R_{\text{id}}}\right)^D$çº§åˆ«
> > >    - å¯¹$B^{s}$ï¼šç”±äº$\text{OOD}$çš„æ€§è´¨$\delta\left(x, i^{\text{th}}\text{-NN}_{\text{ood}}\right)\text{â‰«}\delta\left(x, i^{\text{th}}\text{-NN}_{\text{id}}\right)$ï¼Œä½¿å¾—ä½“ç§¯ä¹Ÿå¤§å¹…è†¨èƒ€
> > > 3. å¯¹æœç´¢è¿‡ç¨‹çš„å½±å“ï¼š
> > >    - å¯¹äº$\text{ID}$æŸ¥è¯¢ï¼šç”±äºæœ€è¿‘é‚»å½¼æ­¤é è¿‘ï¼Œ$\text{GreedySearch}$å¯ä»¥ä½¿$B^{s}(x)$è½»æ¾æ”¶æ•›
> > >      ```txt
> > >      èµ·ç‚¹ -> è¿‘é‚»1 -> è¿‘é‚»2 -> è¿‘é‚»3 (ä¸€ä¸ªå°èŒƒå›´å†…)
> > >      ```
> > >    - å¯¹äº$\text{OOD}$æŸ¥è¯¢ï¼šæœ€è¿‘é‚»æ–¹å‘åˆ†æ•£éš¾ä»¥æ”¶æ•›ï¼Œéœ€è¦æ›´å¤§çš„$\text{Beam}$å®½åº¦$/$æœç´¢è·¯å¾„ç­‰
> > >      ```txt
> > >             è¿‘é‚»2
> > >            â†—ï¸     
> > >      èµ·ç‚¹ -> è¿‘é‚»1 -> è¿‘é‚»3 (åˆ†æ•£åœ¨å¤§èŒƒå›´å†…)
> > >            â†˜ï¸     
> > >             è¿‘é‚»4
> > >      ```
> > >
> > > :two:åœ¨åŸºäºåˆ’åˆ†$\text{IVF}$ä¸Š
> > > 
> > > 1. åŸç†ä¸Šï¼š$\text{IVF}$å…ˆå°†åŸæ•°æ®åˆ†ç°‡
> > >    - $\text{ID}$æŸ¥è¯¢ï¼šæœ€é‚»è¿‘é›†ä¸­åœ¨å°‘æ•°å‡ ä¸ªç›¸é‚»ç°‡ä¸­
> > >    - $\text{OOD}$æŸ¥è¯¢ï¼šæœ€é‚»è¿‘åˆ†æ•£åœ¨å¤šä¸ªä¸ç›¸é‚»ç°‡ä¸­
> > > 2. å®éªŒä¸Šï¼š$\text{OOD}$æŸ¥è¯¢éœ€è¦æ‰«ææ›´å¤šçš„ç°‡ï¼Œæ€§èƒ½ä¸‹é™$2.5$å€

# $\textbf{3. RoarGraph}$

> ## $\textbf{3.1. RoarGraph}$çš„è®¾è®¡æ€è·¯
>
> > :one:é¢å‘è§£å†³ä¸‰ç§æŒ‘æˆ˜
> >
> > 1. è¾¹çš„å»ºç«‹ï¼šå¦‚ä½•è¿æ¥æŸ¥è¯¢$/$åŸºç¡€ä¸¤ç±»ç»“ç‚¹ï¼ŒåŒæ—¶é¿å…åŸºç¡€ç»“ç‚¹åº¦æ•°å¤ªé«˜
> > 2. æœç´¢æ•ˆç‡ï¼šæŸ¥è¯¢ç»“ç‚¹è¦ä¿æŒæé«˜å‡ºåº¦ä»¥è¦†ç›–åŸºç¡€èŠ‚ç‚¹ï¼Œä½†åŒæ—¶ä¹Ÿä¼šå¤§å¹…å¢åŠ è·³æ•°$/$å†…å­˜å¼€é”€
> > 3. è¿é€šæ€§ï¼šé¿å…å‡ºç°å­¤ç«‹ç»“ç‚¹ï¼Œç‹¬ç«‹å­å›¾
> >
> > :one:å¤§è‡´çš„è®¾è®¡æµç¨‹
> >
> > 1. æ„å»ºï¼šå»ºç«‹æŸ¥è¯¢$\boldsymbol{\xleftrightarrow{}}$åŸºç¡€äºŒåˆ†å›¾$\text{â†’}$å°†é‚»æ¥ä¿¡æ¯æŠ•å½±åˆ°åŸºç¡€ç‚¹ä¸­$\text{â†’}$å¢å¼ºè¿æ¥
> > 2. æŸ¥è¯¢ï¼šåŒæ ·æ˜¯ç”¨$\text{BeamSearch}$ 
>
> ## $\textbf{3.2. RoarGraph}$çš„æ„å»º: ä¸‰ä¸ªé˜¶æ®µ
>
> > ### $\textbf{3.2.1. }$é˜¶æ®µ$\textbf{1}$: æŸ¥è¯¢$\boldsymbol{\xleftrightarrow{}}$åŸºç¡€äºŒåˆ†å›¾æ„å»º
> >
> > > :one:äºŒåˆ†å›¾æ¦‚è¿°ï¼š
> > >
> > > 1. åŸºæœ¬æ¦‚å¿µï¼šå°†æ‰€æœ‰çš„ç‚¹åˆ†ä¸ºä¸¤ä¸ªé›†åˆï¼Œæ‰€æœ‰è¾¹å¿…é¡»è¿æ¥ä¸åŒå­é›†çš„ç‚¹ï¼Œä¸èƒ½å†…éƒ¨è¿æ¥
> > >    <img src="https://i-blog.csdnimg.cn/direct/539e1546388344628ab812ea91ad9b1e.png" alt="image-20250104160314817" width=230 /> 
> > > 2. åœ¨æ­¤å¤„ï¼šä¸¤å­é›†æŸ¥è¯¢ç»“ç‚¹$+$åŸºç¡€èŠ‚ç‚¹ï¼Œä¸¤ç§è¾¹[æŸ¥è¯¢ç»“ç‚¹$\text{â†’}$åŸºç¡€ç»“ç‚¹]$\text{+}$[æŸ¥è¯¢ç»“ç‚¹$\text{â†}$åŸºç¡€ç»“ç‚¹]
> > >
> > > :two:æ„å»ºè¿‡ç¨‹æ¦‚è¿°
> > >
> > > $\quad$<img src="https://i-blog.csdnimg.cn/direct/5864da038784414e91d0d01ad6314b7f.png" alt="image-20250104164020863" width=350 /> 
> > >
> > > 1. é¢„å¤„ç†ï¼šè®¡ç®—æ¯ä¸ªæŸ¥è¯¢å‘é‡çš„çœŸå®$N_q\text{-NN}$æ ‡ç­¾
> > > 2. è¾¹æ„å»ºï¼š
> > >    |          æ–¹å‘          | æ“ä½œ                                                         |
> > >    | :--------------------: | :------------------------------------------------------------ |
> > >    | æŸ¥è¯¢ç‚¹$\text{â†’}$åŸºç¡€ç‚¹ | æŸ¥è¯¢ç‚¹$\xrightarrow{è¿æ¥}$æŸ¥è¯¢ç‚¹çš„$N_q\text{-NN}$åŸºç¡€ç‚¹      |
> > >    | åŸºç¡€ç‚¹$\text{â†’}$æŸ¥è¯¢ç‚¹ | æŸ¥è¯¢ç‚¹$\xleftarrow{è¿æ¥}$æŸ¥è¯¢ç‚¹çš„$1\text{-NN}$åŸºç¡€ç‚¹ï¼ŒæŸ¥è¯¢ç‚¹$\xrightarrow{æ–­è¿}$æŸ¥è¯¢ç‚¹çš„$1\text{-NN}$åŸºç¡€ç‚¹ |
> > > 3. ç¤ºä¾‹ï¼š 
> > >    ```txt
> > >    é¢„å¤„ç†: T1 -> X1, X2, X3 (Nq=3)
> > >    è¾¹æ„å»º: T1 -> X2, X3 
> > >           T1 <- X1 
> > >    ```
> > >
> > > :two:æ„å»ºè¿‡ç¨‹åˆ†æ
> > >
> > > 1. ç»“ç‚¹åº¦æ•°çš„è€ƒé‡ï¼š
> > >    - é«˜æŸ¥è¯¢ç»“ç‚¹å‡ºåº¦ï¼šæé«˜$N_q$å€¼ï¼Œå¢åŠ [åŸºç¡€ç‚¹$\xrightarrow[è¦†ç›–æ€§]{é‡å æ€§}$æŸ¥è¯¢ç‚¹]ï¼Œä½¿å¤šåŸºç¡€ç‚¹å¯ç”±åŒä¸€æŸ¥è¯¢ç‚¹è”ç³»
> > >    - ä½åŸºç¡€èŠ‚ç‚¹å‡ºåº¦ï¼šä¸ºäº†è§£å†³ä¸Šè¿°æŒ‘æˆ˜$1$ï¼Œç›®çš„åœ¨äºæé«˜äºŒåˆ†å›¾ä¸Šçš„æœç´¢æ•ˆç‡
> > > 2. è¾¹æ–¹å‘çš„è€ƒè™‘ï¼šä¸è¿›è¡ŒåŒå‘è¿æ¥ï¼Œé¿å…äºŒåˆ†å›¾æœç´¢æ—¶è¦å»æ£€æŸ¥é‚»å±…çš„é‚»å±…($N_q^2$)
> > >    ```txt
> > >    é¢„å¤„ç†: T1 -> X1, X2, X3 (Nq=3)
> > >    è¾¹æ„å»º: T1 -> X1, X2, X3 
> > >           T1 <- X1
> > >           T1 <- X2
> > >           T1 <- X3
> > >    ```
> >
> > ### $\textbf{3.2.2. }$é˜¶æ®µ$\textbf{2}$: é¢†åŸŸæ„ŸçŸ¥æŠ•å½±
> >
> > > :one:ä¸€äº›åˆ†æ
> > >
> > > 1. ä¼˜åŒ–åŠ¨æœºï¼šäºŒåˆ†å›¾å†…å­˜æ¶ˆè€—é«˜(é¢å¤–å­˜å‚¨äº†æŸ¥è¯¢èŠ‚ç‚¹)ï¼Œæœç´¢è·¯å¾„é•¿(éœ€è¦é¢å¤–ç»è¿‡æŸ¥è¯¢ç»“ç‚¹)
> > > 2. å…³äºæŠ•å½±ï¼š
> > >    - ç›®çš„ï¼šç§»é™¤äºŒåˆ†å›¾ä¸­çš„æŸ¥è¯¢ç»“ç‚¹ï¼Œå¹¶ä¿ç•™ä»æŸ¥è¯¢åˆ†å¸ƒè·å¾—çš„é‚»è¿‘å…³ç³»
> > >    - æ–¹å¼ï¼šæœ€ç®€å•çš„å¯å°†æŸ¥è¯¢ç‚¹æ‰€è¿çš„å…¨éƒ¨åŸºç¡€ç‚¹å…¨è¿æ¥(åº¦æ•°å¤ªé«˜)ï¼Œä¼˜åŒ–æ–¹æ³•å¦‚é¢†åŸŸæ„ŸçŸ¥æŠ•å½±
> > >
> > > :two:æŠ•å½±è¿‡ç¨‹ï¼š
> > >
> > > 1. é¢„å¤„ç†ï¼š
> > >    - éå†æŸ¥è¯¢ç‚¹ï¼šè·å¾—ä¸æŸ¥è¯¢ç‚¹ç›¸è¿çš„æœ€é‚»è¿‘åŸºç¡€ç‚¹
> > >      ```txt
> > >      æŸ¥è¯¢Q -> {B1, B2, B3, B4, B5}  (Qè¿æ¥äº†5ä¸ªåŸºç¡€èŠ‚ç‚¹)
> > >      ```
> > >    - é€‰æ‹©ä¸­å¿ƒç‚¹ï¼šå³æŸ¥è¯¢ç‚¹çš„$\text{1-NN}$ç‚¹ï¼Œä½œä¸º$\text{Pivot}$
> > >       ```txt
> > >       æŸ¥è¯¢Q -> {B1, B2, B3, B4, B5}  (Qè¿æ¥äº†5ä¸ªåŸºç¡€èŠ‚ç‚¹)
> > >                ğŸ‘†
> > >               pivot
> > >       ```
> > >    - æ’åºåŸºç¡€ç»“ç‚¹ï¼šå°†ä½™ä¸‹$N_q\text{-NN}$ç‚¹ï¼ŒæŒ‰ä¸$\text{Pivot}$çš„è·ç¦»æ’åº
> > > 2. æ„ŸçŸ¥æŠ•å½±ï¼š
> > >    - è¿æ¥ï¼šè®©ä¸­å¿ƒç‚¹ä¸ä½™ä¸‹ç‚¹å»ºç«‹è¿æ¥
> > >      ```txt
> > >      B1 -> B2 (æœ€è¿‘)
> > >      B1 -> B3 (æ¬¡è¿‘)
> > >      B1 -> B4 (è¾ƒè¿œ)
> > >      B1 -> B5 (æœ€è¿œ)
> > >      ```
> > >    - è¿‡æ»¤ï¼šä¿è¯ä¸$\text{Pivot}$è¿æ¥æ–¹å‘çš„å¤šæ ·æ€§
> > >      <img src="https://i-blog.csdnimg.cn/direct/d84d7b2160b440da9c6feb5791bc246f.png" alt=" " width=200 /> 
> > >      |                         æ¡ä»¶                          |       å«ä¹‰       |                 æ“ä½œ                  |
> > >      | :---------------------------------------------------: | :--------------: | :-----------------------------------: |
> > >      | $\text{Dist}(X,Y)\text{<}\text{Dist}(\text{Pivot},Y)$ |  è¯¥æ–¹å‘å·²æœ‰è¿æ¥  | åˆ™ç­›æ‰$Y$(ä¸ä¸$\text{Pivot}$å»ºç«‹è¿æ¥) |
> > >      | $\text{Dist}(X,Y)\text{>}\text{Dist}(\text{Pivot},Y)$ | ä»£è¡¨æ–°çš„æœç´¢æ–¹å‘ | åˆ™ä¿ç•™$Y$(å¯ä¸$\text{Pivot}$å»ºç«‹è¿æ¥) |
> > >    - å¡«å……ï¼šå½“$\text{Pivot}$çš„å‡ºåº¦å°äºåº¦æ•°é™åˆ¶ï¼Œåˆ™åˆé‡æ–°è¿æ¥ä¹‹å‰è¿‡æ»¤æ‰çš„ç»“ç‚¹
> >
> > ### $\textbf{3.2.3. }$è¿é€šæ€§å¢å¼º
> >
> > > <img src="https://i-blog.csdnimg.cn/direct/ae25bdc424d743d698dd3e8e85a9f0f8.png" alt="image-20250104172351909" width=500 /> 
> > >
> > > :one:ä¸ºä½•è¦å¢å¼ºï¼šä»…ä¾èµ–äºäºŒåˆ†å›¾çš„è¦†ç›–èŒƒå›´ï¼ŒæŠ•å½±å›¾çš„è¿é€šæ€§è¿˜å¤ªä½ï¼Œå¯¹$\text{GreedySearch}$ä¸å‹å¥½
> > >
> > > :two:å¢å¼ºçš„æ–¹æ³•ï¼š
> > >
> > > 1. æ£€ç´¢ï¼šä»åŸºç¡€é›†çš„$\text{Medoid}$å¼€å§‹ï¼Œå¯¹æ¯ä¸ªåŸºç¡€ç‚¹æ‰§è¡Œ$\text{BeamSearch}$å¾—åˆ°æœ€é‚»è¿‘(ä½œä¸ºå€™é€‰ç‚¹)
> > > 2. è¿è¾¹ï¼šåœ¨ä¸è¶…è¿‡åº¦æ•°é™åˆ¶çš„å‰æä¸‹ï¼Œè®©è¯¥åŸºç¡€ç‚¹è¿æ¥ä¸€å®šæ•°é‡çš„å€™é€‰ç‚¹ä½œ
>
> ## $\textbf{3.3. RoarGraph}$æ€§èƒ½çš„éªŒè¯
>
> > ### $\textbf{3.3.1. }$å®éªŒè®¾ç½®
> >
> > > :one:æ•°æ®é›†
> > >
> > > |         æ•°æ®é›†         | æè¿°                                 |      æŸ¥è¯¢é›†       |     ç´¢å¼•é›†     |
> > > | :--------------------: | :------------------------------------ | :---------------: | :------------: |
> > > | $\text{Text-to-Image}$ | æµè¡ŒåŸºå‡†æ•°æ®é›†ï¼Œå«å›¾åƒå’Œæ–‡æœ¬æŸ¥è¯¢å‘é‡ | å®˜æ–¹$1\text{w}$æ¡ | ä½™ä¸‹ä¸é‡å æ•°æ® |
> > > |     $\text{LAION}$     | æ•°ç™¾ä¸‡å¯¹å›¾åƒ$-$æ›¿ä»£æ–‡æœ¬å¯¹            | é‡‡æ ·$1\text{w}$æ¡ | ä½™ä¸‹ä¸é‡å æ•°æ® |
> > > |    $\text{WebVid}$     | ç´ æç½‘ç«™è·å–çš„å­—å¹•å’Œè§†é¢‘å¯¹           | é‡‡æ ·$1\text{w}$æ¡ | ä½™ä¸‹ä¸é‡å æ•°æ® |
> > >
> > > :two:è¶…å‚æ•°è®¾ç½®
> > >
> > > |         æ¨¡å‹          | è¶…å‚æ•°åˆ—è¡¨                                                   |
> > > | :-------------------: | :------------------------------------------------------------ |
> > > |     $\text{HNSW}$     | $M\text{=}32$, $\text{efConstruction}\text{=}500$            |
> > > |     $\text{NSG}$      | $R\text{=}64$, $C\text{=}L\text{=}500$                       |
> > > |   $\tau\text{-MNG}$   | $R\text{=}64$, $C\text{=}L\text{=}500$, $\tau\text{=}0.01$   |
> > > | $\text{RobustVamana}$ | $R\text{=}64$, $L\text{=}500$, $\alpha\text{=}1.0$           |
> > > |  $\text{RoarGraph}$   | $N_q\text{=}100$(æœ€è¿‘é‚»å€™é€‰æ•°é‡), $M\text{=}35$(å‡ºåº¦çº¦æŸ), $L\text{=}500$(å€™é€‰é›†å¤§å°) |
> > >
> > > :three:æ€§èƒ½æŒ‡æ ‡ï¼š$\text{Recall@k}$å’Œ$\text{QPS}$(æ£€ç´¢é€Ÿåº¦)
> >
> > ### $\textbf{3.3.2. }$å®éªŒç»“æœ
> >
> > > :one:$\text{QPS}$ä¸å¬å›ï¼š$\text{RoarGraph}$æœ€ä¼˜(è¶…è¿‡$\text{RobustVamana}$)ï¼Œ$\text{HNSW/NSG}$å·®ä¸å¤š, $\tau\text{-MNG}$æœ€å·®
> > >
> > > <img src="https://i-blog.csdnimg.cn/direct/2969ad3ab0614715b9035aa0077d7f00.png" alt="image-20250104174815800" width=660 /> 
> > >
> > > :two:è·³æ•°ä¸å¬å›ï¼š$\text{RoarGraph}$è·³æ•°æ˜¾è‘—å‡å°‘ï¼Œä¸”éš$\text{Recall@}$çš„$k$å¢å¤§ï¼Œå‡å°‘è¶‹åŠ¿ä¸‹é™
> > >
> > > <img src="https://i-blog.csdnimg.cn/direct/d0cb9f9104314f20a32fbdb908411a8c.png" alt="image-20250104175148632" width=660 /> 
> > >
> > > :three:æ¶ˆèå®éªŒï¼šå¯¹æ¯”äº†äºŒåˆ†å›¾$/$æŠ•å½±å›¾$/$å®Œæ•´å›¾ï¼Œå¯è§é€šè¿‡é‚»åŸŸæ„ŸçŸ¥æŠ•å½±æ˜¾è‘—æå‡æ€§èƒ½
> > >
> > > <img src="https://i-blog.csdnimg.cn/direct/9dbad4e41850462d8c9a1d8a080e2d28.png" alt="image-20250104175148632" width=660 /> 
> > >
> > > :four:æŸ¥è¯¢é›†è§„æ¨¡ï¼šå³æŸ¥è¯¢é›†å¤§å°å åŸºç¡€é›†å¤§å°æ¯”é‡å¯¹ç´¢å¼•æ€§èƒ½çš„å½±å“ï¼›å¯è§èµ·å§‹æ¨¡å‹å¯¹è§„æ¨¡**å¹¶ä¸æ•æ„Ÿ**
> > >
> > > <img src="https://i-blog.csdnimg.cn/direct/50cb7718c5ff4b1ca4ae220034f47c89.png" alt="image-20250104175148632" width=660 /> 
> > >
> > > :five:åœ¨$\text{ID}$è´Ÿè½½ä¸Šçš„æ€§èƒ½ï¼š$\text{RoarGraph}$ä¾æ—§èƒ½æ‰“ï¼Œå’Œ$\text{HNSW}$ç›¸å½“
> > >
> > > <img src="https://i-blog.csdnimg.cn/direct/74ea1abefab84ac9b4922c793721a60c.png" alt="image-20250104175148632" width=660 /> 
> > >
> > > :six:ç´¢å¼•å¼€é”€æˆæœ¬ï¼šä½¿ç”¨$10\%$æ•°æ®å¯å¤§å¹…é™ä½æ„å»ºæˆæœ¬ï¼ŒåŒæ—¶ä¿æŒæœç´¢æ€§èƒ½
> > >
> > > $\quad$<img src=https://i-blog.csdnimg.cn/direct/99786c1f116245709141af6a0c05ec01.png alt="image-20250104180704959" width=580 />  
>
> ## $\textbf{3.4. RoarGraph}$çš„ä¸€äº›è®¨è®º
>
> > :one:è¿ç”¨åœºæ™¯ï¼šç»“åˆå¤§é‡å†å²æŸ¥è¯¢æ•°æ®ï¼Œç”¨å¤šæ¨¡æ€æ·±åº¦å­¦ä¹ æ¨¡å‹ç”ŸæˆåµŒå…¥ï¼Œéƒ¨ç½²åœ¨å¤§å‹æ£€ç´¢$/$æ¨èç³»ç»Ÿ
> >
> > :two:æ›´æ–°æœºåˆ¶ï¼š
> >
> > 1. åˆå§‹æœç´¢ï¼š
> >    - ç»“ç‚¹æŸ¥è¯¢ï¼šå°†æ–°æ’å…¥ä¸‹æ–°åŸºç¡€èŠ‚ç‚¹$v$ä½œä¸ºæŸ¥è¯¢ï¼Œåœ¨åŸºç¡€æ•°æ®é›†ä¸­æœç´¢å…¶æœ€é‚»è¿‘
> >    - ç»“ç‚¹ç­›é€‰ï¼šè¦æ±‚æœ€é‚»è¿‘æ»¡è¶³ï¼Œæ›¾åœ¨å›¾æ„å»ºè¿‡ç¨‹ä¸­ä¸**è‡³å°‘ä¸€ä¸ªæŸ¥è¯¢ç‚¹**è¿æ¥è¿‡çš„åŸºç¡€ç‚¹
> >    - åå‘å›æº¯ï¼šå¯¹è¯¥æœ€é‚»è¿‘ç‚¹ï¼Œå›æº¯åˆ°ä¸å…¶æ›¾å»ºç«‹è¿‡è¿æ¥çš„è·ç¦»æœ€è¿‘çš„æŸ¥è¯¢ç‚¹$q$ 
> > 2. å­å›¾æ„å»ºï¼š
> >    - äºŒåˆ†å­å›¾ï¼šå°†$q\xleftrightarrow{}N_{\text {out}}\text{âˆª}v$æ•´åˆä¸ºäºŒåˆ†å­å›¾
> >    - é‚»åŸŸæŠ•å½±ï¼šå°†$v$ä½œä¸º$\text{Pivot}$æŒ‰åŒæ ·çš„æ–¹å¼ï¼Œç”ŸæˆæŠ•å½±å›¾
> >
> > :three:åˆ é™¤æ“ä½œï¼šé‡‡ç”¨å¢“ç¢‘æ ‡è®°æ³•$\text{Tombstones}$ï¼Œå³è¢«åˆ ç»“ç‚¹ä»»å‚ä¸è·¯ç”±ï¼Œä½†æ’é™¤åœ¨æœç´¢ç»“æœä¸­
